<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Friend Finder</title>

    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />
    <!-- <link rel="stylesheet" type="text/css" href="friend.css" /> -->
  </head>
  <body>
    <div class="container bg-info text-dark">
      <div class="row text-center">
        <div class="col-12">
          <h1 class="text-center pt-4">
            Answer the Information & Survey Questions Below
          </h1>
          <h2 class="text-center">
            All are required in order to find your new best mate
          </h2>
        </div>
      </div>

      <div class="row mt-4">
        <div class="col-12">
          <form>
            <h3 class="pt-5 text-center">Enter your Information</h3>
            <div class="form-group pt-2">
              <label for="profileName">Name (required)</label>
              <input type="text" class="form-control" id="profileName" />
            </div>
            <div class="form-group">
              <label for="profilePicLink">Link to Photo Image (required)</label>
              <input type="text" class="form-control" id="profilePicLink" />
            </div>
          </form>
        </div>
      </div>

      <div class="row mt-4">
        <div class="col-12">
          <h3 class="text-center">
            Choose the number the reflects how true or false the statment is to
            you.
          </h3>
          <h4 class="text-center">Agree greatly 5 4 3 2 1 Disagree greatly</h4>
          <br />
          <p class="pt-2">When going out for Mexican you would order Queso everytime</p>
          <div class="input-group">
            <select class="custom-select" id="question1">
              <option selected>Select from the options below</option>
              <option value="1">1</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5</option>
            </select>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-12">
          <p class="pt-3">
            Me time is needed after socializing or being in large group settings
          </p>
          <div class="input-group">
            <select class="custom-select" id="question2">
              <option selected>Select from the options below</option>
              <option value="1">1</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5</option>
            </select>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-12">
          <p class="pt-3">When given the choice you would choose movies over books</p>
          <div class="input-group">
            <select class="custom-select" id="question3">
              <option selected>Select from the options below</option>
              <option value="1">1</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5</option>
            </select>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-12">
          <p class="pt-3">You may try to cook, but it ends up burning</p>
          <div class="input-group">
            <select class="custom-select" id="question4">
              <option selected>Select from the options below</option>
              <option value="1">1</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5</option>
            </select>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-12">
          <p class="pt-3">You would pick cats over dogs</p>
          <div class="input-group">
            <select class="custom-select" id="question5">
              <option selected>Select from the options below</option>
              <option value="1">1</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5</option>
            </select>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-12">
          <p class="pt-3">You are a day bird rather than a night owl</p>
          <div class="input-group">
            <select class="custom-select" id="question6">
              <option selected>Select from the options below</option>
              <option value="1">1</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5</option>
            </select>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-12">
          <p class="pt-3">You have to check the notifications on your phone</p>
          <div class="input-group">
            <select class="custom-select" id="question7">
              <option selected>Select from the options below</option>
              <option value="1">1</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5</option>
            </select>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-12">
          <p class="pt-3">Random singing and dancing is a daily occurence</p>
          <div class="input-group">
            <select class="custom-select" id="question8">
              <option selected>Select from the options below</option>
              <option value="1">1</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5</option>
            </select>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-12">
          <p class="pt-3">You prefer the beach over the moutains</p>
          <div class="input-group">
            <select class="custom-select" id="question9">
              <option selected>Select from the options below</option>
              <option value="1">1</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5</option>
            </select>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-12">
          <p class="pt-3">Running is your favorite way to exercise</p>
          <div class="input-group">
            <select class="custom-select" id="question10">
              <option selected>Select from the options below</option>
              <option value="1">1</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5</option>
            </select>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-12">
          <button type="button" class="btn btn-lg btn-light text-info mt-4 mb-5" id="submit">
            <h4>Submit Survey</h4>
          </button>
        </div>
      </div>

      <div
        class="modal fade"
        id="matchModal"
        tabindex="-1"
        role="dialog"
        aria-labelledby="matchModal"
        aria-hidden="true"
      >
        <div
          class="modal-dialog modal-dialog-centered modal-lg"
          role="document"
        >
          <div class="modal-content text-center">
            <div class="modal-header">
              <h3 class="modal-title text-info" id="matchModal">Meet Your Match</h3>
              <button
                type="button"
                class="close"
                data-dismiss="modal"
                aria-label="Close"
              >
                <span aria-hidden="true">&times;</span>
              </button>
            </div>

            <div class="modal-body text-info">
              <h4 id="matchName"></h4>
              <img
                id="matchImg"
                src="https://chandigarhbytes.com/wp-content/uploads/2017/05/bigstock-Happy-group-of-friends-family-43459618.jpg"
                alt="Picture of Friendship"
              />
            </div>

            <div class="modal-footer">
              <button
                type="button"
                class="btn btn-default"
                data-dismiss="modal"
              >
                Close
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
    <!-- <script type="text/javascript" src="assets/js/index.js"></script> -->
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
      integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
      crossorigin="anonymous"
    ></script>
    <script type="text/javascript">
      $("#submit").on("click", function(event) {
        event.preventDefault();

        // calling the function below
        checkProfileInput();
        // validating all form input fields are filled out, alert if not, ajax call to send over newProfile information if filled out
        function checkProfileInput() {
          var validInput = true;
          if (
            $("#profileName").val() === "" ||
            $("#profilePicLink").val() === ""
          ) {
            validInput = false;
          }

          $(".custom-select").each(function() {
            if ($(this).val() === "Select from the options below") {
              validInput = false;
            }
          });
          return validInput;
        }

        if (checkProfileInput() == true) {
          //grabbing input data from forms and input groups placing in variable
          var newProfile = {
            name: $("#profileName")
              .val()
              .trim(),
            photo: $("#profilePicLink")
              .val()
              .trim(),
            answers: [
              $("#question1").val(),
              $("#question2").val(),
              $("#question3").val(),
              $("#question4").val(),
              $("#question5").val(),
              $("#question6").val(),
              $("#question7").val(),
              $("#question8").val(),
              $("#question9").val(),
              $("#question10").val()
            ]
          };
          // console.log(newProfile);

          $.ajax({
            url: "/api/friends",
            method: "POST",
            data: newProfile
          }).then(function(data) {
            $("#matchName").text(data.name);
            $("#matchImg").attr("src", data.photo);
            // console.log(data.name);
            $("#matchModal").modal("show");
          });
        } else {
          alert(
            "Please fill out all of the information fields and questions before submitting!"
          );
        }
      });
    </script>
  </body>
</html>
